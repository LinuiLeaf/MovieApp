d2443bc08a6a905c84b650d6276ec92e
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _setAndForwardRef = _interopRequireDefault(require("react-native/Libraries/Utilities/setAndForwardRef"));

var _Platform = _interopRequireDefault(require("../../Utilities/Platform"));

var _StyleSheet = _interopRequireDefault(require("../../StyleSheet/StyleSheet"));

var _Animated = _interopRequireDefault(require("../../Animated/Animated"));

var React = _interopRequireWildcard(require("react"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var AnimatedView = _Animated.default.View;
var ScrollViewStickyHeaderWithForwardedRef = React.forwardRef(function ScrollViewStickyHeader(props, forwardedRef) {
  var inverted = props.inverted,
      scrollViewHeight = props.scrollViewHeight,
      hiddenOnScroll = props.hiddenOnScroll,
      scrollAnimatedValue = props.scrollAnimatedValue,
      _nextHeaderLayoutY = props.nextHeaderLayoutY;

  var _React$useState = React.useState(false),
      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
      measured = _React$useState2[0],
      setMeasured = _React$useState2[1];

  var _React$useState3 = React.useState(0),
      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),
      layoutY = _React$useState4[0],
      setLayoutY = _React$useState4[1];

  var _React$useState5 = React.useState(0),
      _React$useState6 = (0, _slicedToArray2.default)(_React$useState5, 2),
      layoutHeight = _React$useState6[0],
      setLayoutHeight = _React$useState6[1];

  var _React$useState7 = React.useState(null),
      _React$useState8 = (0, _slicedToArray2.default)(_React$useState7, 2),
      translateY = _React$useState8[0],
      setTranslateY = _React$useState8[1];

  var _React$useState9 = React.useState(_nextHeaderLayoutY),
      _React$useState10 = (0, _slicedToArray2.default)(_React$useState9, 2),
      nextHeaderLayoutY = _React$useState10[0],
      setNextHeaderLayoutY = _React$useState10[1];

  var _React$useState11 = React.useState(false),
      _React$useState12 = (0, _slicedToArray2.default)(_React$useState11, 2),
      isFabric = _React$useState12[0],
      setIsFabric = _React$useState12[1];

  var componentRef = React.useRef();

  var _setNativeRef = (0, _setAndForwardRef.default)({
    getForwardedRef: function getForwardedRef() {
      return forwardedRef;
    },
    setLocalRef: function setLocalRef(ref) {
      componentRef.current = ref;

      if (ref) {
        var _ref$_internalInstanc, _ref$_internalInstanc2;

        ref.setNextHeaderY = function (value) {
          setNextHeaderLayoutY(value);
        };

        setIsFabric(!!((_ref$_internalInstanc = ref['_internalInstanceHandle']) != null && (_ref$_internalInstanc2 = _ref$_internalInstanc.stateNode) != null && _ref$_internalInstanc2.canonical));
      }
    }
  });

  var offset = (0, React.useMemo)(function () {
    return hiddenOnScroll === true ? _Animated.default.diffClamp(scrollAnimatedValue.interpolate({
      extrapolateLeft: 'clamp',
      inputRange: [layoutY, layoutY + 1],
      outputRange: [0, 1]
    }).interpolate({
      inputRange: [0, 1],
      outputRange: [0, -1]
    }), -layoutHeight, 0) : null;
  }, [scrollAnimatedValue, layoutHeight, layoutY, hiddenOnScroll]);

  var _React$useState13 = React.useState(function () {
    var inputRange = [-1, 0];
    var outputRange = [0, 0];
    var initialTranslateY = scrollAnimatedValue.interpolate({
      inputRange: inputRange,
      outputRange: outputRange
    });

    if (offset != null) {
      return _Animated.default.add(initialTranslateY, offset);
    }

    return initialTranslateY;
  }),
      _React$useState14 = (0, _slicedToArray2.default)(_React$useState13, 2),
      animatedTranslateY = _React$useState14[0],
      setAnimatedTranslateY = _React$useState14[1];

  var _haveReceivedInitialZeroTranslateY = (0, React.useRef)(true);

  var _timer = (0, React.useRef)(null);

  (0, React.useEffect)(function () {
    if (translateY !== 0 && translateY != null) {
      _haveReceivedInitialZeroTranslateY.current = false;
    }
  }, [translateY]);
  var animatedValueListener = (0, React.useCallback)(function (_ref) {
    var value = _ref.value;

    var _debounceTimeout = _Platform.default.OS === 'android' ? 15 : 64;

    if (value === 0 && !_haveReceivedInitialZeroTranslateY.current) {
      _haveReceivedInitialZeroTranslateY.current = true;
      return;
    }

    if (_timer.current != null) {
      clearTimeout(_timer.current);
    }

    _timer.current = setTimeout(function () {
      if (value !== translateY) {
        setTranslateY(value);
      }
    }, _debounceTimeout);
  }, [translateY]);
  (0, React.useEffect)(function () {
    var inputRange = [-1, 0];
    var outputRange = [0, 0];

    if (measured) {
      if (inverted === true) {
        if (scrollViewHeight != null) {
          var stickStartPoint = layoutY + layoutHeight - scrollViewHeight;

          if (stickStartPoint > 0) {
            inputRange.push(stickStartPoint);
            outputRange.push(0);
            inputRange.push(stickStartPoint + 1);
            outputRange.push(1);
            var collisionPoint = (nextHeaderLayoutY || 0) - layoutHeight - scrollViewHeight;

            if (collisionPoint > stickStartPoint) {
              inputRange.push(collisionPoint, collisionPoint + 1);
              outputRange.push(collisionPoint - stickStartPoint, collisionPoint - stickStartPoint);
            }
          }
        }
      } else {
        inputRange.push(layoutY);
        outputRange.push(0);

        var _collisionPoint = (nextHeaderLayoutY || 0) - layoutHeight;

        if (_collisionPoint >= layoutY) {
          inputRange.push(_collisionPoint, _collisionPoint + 1);
          outputRange.push(_collisionPoint - layoutY, _collisionPoint - layoutY);
        } else {
          inputRange.push(layoutY + 1);
          outputRange.push(1);
        }
      }
    }

    var newAnimatedTranslateY = scrollAnimatedValue.interpolate({
      inputRange: inputRange,
      outputRange: outputRange
    });

    if (offset != null) {
      newAnimatedTranslateY = _Animated.default.add(newAnimatedTranslateY, offset);
    }

    var animatedListenerId;

    if (isFabric) {
      animatedListenerId = newAnimatedTranslateY.addListener(animatedValueListener);
    }

    setAnimatedTranslateY(newAnimatedTranslateY);
    return function () {
      if (animatedListenerId) {
        newAnimatedTranslateY.removeListener(animatedListenerId);
      }

      if (_timer.current != null) {
        clearTimeout(_timer.current);
      }
    };
  }, [nextHeaderLayoutY, measured, layoutHeight, layoutY, scrollViewHeight, scrollAnimatedValue, inverted, offset, animatedValueListener, isFabric]);

  var _onLayout = function _onLayout(event) {
    setLayoutY(event.nativeEvent.layout.y);
    setLayoutHeight(event.nativeEvent.layout.height);
    setMeasured(true);
    props.onLayout(event);
    var child = React.Children.only(props.children);

    if (child.props.onLayout) {
      child.props.onLayout(event);
    }
  };

  var child = React.Children.only(props.children);
  var passthroughAnimatedPropExplicitValues = isFabric && translateY != null ? {
    style: {
      transform: [{
        translateY: translateY
      }]
    }
  } : null;
  return React.createElement(AnimatedView, {
    collapsable: false,
    nativeID: props.nativeID,
    onLayout: _onLayout,
    ref: _setNativeRef,
    style: [child.props.style, styles.header, {
      transform: [{
        translateY: animatedTranslateY
      }]
    }],
    passthroughAnimatedPropExplicitValues: passthroughAnimatedPropExplicitValues
  }, React.cloneElement(child, {
    style: styles.fill,
    onLayout: undefined
  }));
});

var styles = _StyleSheet.default.create({
  header: {
    zIndex: 10,
    position: 'relative'
  },
  fill: {
    flex: 1
  }
});

var _default = ScrollViewStickyHeaderWithForwardedRef;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBbmltYXRlZFZpZXciLCJBbmltYXRlZCIsIlZpZXciLCJTY3JvbGxWaWV3U3RpY2t5SGVhZGVyV2l0aEZvcndhcmRlZFJlZiIsIlJlYWN0IiwiZm9yd2FyZFJlZiIsIlNjcm9sbFZpZXdTdGlja3lIZWFkZXIiLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImludmVydGVkIiwic2Nyb2xsVmlld0hlaWdodCIsImhpZGRlbk9uU2Nyb2xsIiwic2Nyb2xsQW5pbWF0ZWRWYWx1ZSIsIl9uZXh0SGVhZGVyTGF5b3V0WSIsIm5leHRIZWFkZXJMYXlvdXRZIiwidXNlU3RhdGUiLCJtZWFzdXJlZCIsInNldE1lYXN1cmVkIiwibGF5b3V0WSIsInNldExheW91dFkiLCJsYXlvdXRIZWlnaHQiLCJzZXRMYXlvdXRIZWlnaHQiLCJ0cmFuc2xhdGVZIiwic2V0VHJhbnNsYXRlWSIsInNldE5leHRIZWFkZXJMYXlvdXRZIiwiaXNGYWJyaWMiLCJzZXRJc0ZhYnJpYyIsImNvbXBvbmVudFJlZiIsInVzZVJlZiIsIl9zZXROYXRpdmVSZWYiLCJzZXRBbmRGb3J3YXJkUmVmIiwiZ2V0Rm9yd2FyZGVkUmVmIiwic2V0TG9jYWxSZWYiLCJyZWYiLCJjdXJyZW50Iiwic2V0TmV4dEhlYWRlclkiLCJ2YWx1ZSIsInN0YXRlTm9kZSIsImNhbm9uaWNhbCIsIm9mZnNldCIsInVzZU1lbW8iLCJkaWZmQ2xhbXAiLCJpbnRlcnBvbGF0ZSIsImV4dHJhcG9sYXRlTGVmdCIsImlucHV0UmFuZ2UiLCJvdXRwdXRSYW5nZSIsImluaXRpYWxUcmFuc2xhdGVZIiwiYWRkIiwiYW5pbWF0ZWRUcmFuc2xhdGVZIiwic2V0QW5pbWF0ZWRUcmFuc2xhdGVZIiwiX2hhdmVSZWNlaXZlZEluaXRpYWxaZXJvVHJhbnNsYXRlWSIsIl90aW1lciIsInVzZUVmZmVjdCIsImFuaW1hdGVkVmFsdWVMaXN0ZW5lciIsInVzZUNhbGxiYWNrIiwiX2RlYm91bmNlVGltZW91dCIsIlBsYXRmb3JtIiwiT1MiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic3RpY2tTdGFydFBvaW50IiwicHVzaCIsImNvbGxpc2lvblBvaW50IiwibmV3QW5pbWF0ZWRUcmFuc2xhdGVZIiwiYW5pbWF0ZWRMaXN0ZW5lcklkIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIl9vbkxheW91dCIsImV2ZW50IiwibmF0aXZlRXZlbnQiLCJsYXlvdXQiLCJ5IiwiaGVpZ2h0Iiwib25MYXlvdXQiLCJjaGlsZCIsIkNoaWxkcmVuIiwib25seSIsImNoaWxkcmVuIiwicGFzc3Rocm91Z2hBbmltYXRlZFByb3BFeHBsaWNpdFZhbHVlcyIsInN0eWxlIiwidHJhbnNmb3JtIiwibmF0aXZlSUQiLCJzdHlsZXMiLCJoZWFkZXIiLCJjbG9uZUVsZW1lbnQiLCJmaWxsIiwidW5kZWZpbmVkIiwiU3R5bGVTaGVldCIsImNyZWF0ZSIsInpJbmRleCIsInBvc2l0aW9uIiwiZmxleCJdLCJzb3VyY2VzIjpbIlNjcm9sbFZpZXdTdGlja3lIZWFkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7TGF5b3V0RXZlbnR9IGZyb20gJy4uLy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCBzZXRBbmRGb3J3YXJkUmVmIGZyb20gJ3JlYWN0LW5hdGl2ZS9MaWJyYXJpZXMvVXRpbGl0aWVzL3NldEFuZEZvcndhcmRSZWYnO1xuaW1wb3J0IFBsYXRmb3JtIGZyb20gJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybSc7XG5pbXBvcnQgU3R5bGVTaGVldCBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IEFuaW1hdGVkIGZyb20gJy4uLy4uL0FuaW1hdGVkL0FuaW1hdGVkJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7dXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZUNhbGxiYWNrfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IEFuaW1hdGVkVmlldyA9IEFuaW1hdGVkLlZpZXc7XG5cbmV4cG9ydCB0eXBlIFByb3BzID0gJFJlYWRPbmx5PHtcbiAgY2hpbGRyZW4/OiBSZWFjdC5FbGVtZW50PCRGbG93Rml4TWU+LFxuICBuZXh0SGVhZGVyTGF5b3V0WTogP251bWJlcixcbiAgb25MYXlvdXQ6IChldmVudDogTGF5b3V0RXZlbnQpID0+IHZvaWQsXG4gIHNjcm9sbEFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkLlZhbHVlLFxuICAvLyBXaWxsIGNhdXNlIHN0aWNreSBoZWFkZXJzIHRvIHN0aWNrIGF0IHRoZSBib3R0b20gb2YgdGhlIFNjcm9sbFZpZXcgaW5zdGVhZFxuICAvLyBvZiB0aGUgdG9wLlxuICBpbnZlcnRlZDogP2Jvb2xlYW4sXG4gIC8vIFRoZSBoZWlnaHQgb2YgdGhlIHBhcmVudCBTY3JvbGxWaWV3LiBDdXJyZW50bHkgb25seSBzZXQgd2hlbiBpbnZlcnRlZC5cbiAgc2Nyb2xsVmlld0hlaWdodDogP251bWJlcixcbiAgbmF0aXZlSUQ/OiA/c3RyaW5nLFxuICBoaWRkZW5PblNjcm9sbD86ID9ib29sZWFuLFxufT47XG5cbmNvbnN0IFNjcm9sbFZpZXdTdGlja3lIZWFkZXJXaXRoRm9yd2FyZGVkUmVmOiBSZWFjdC5BYnN0cmFjdENvbXBvbmVudDxcbiAgUHJvcHMsXG4gICRSZWFkT25seTx7XG4gICAgc2V0TmV4dEhlYWRlclk6IG51bWJlciA9PiB2b2lkLFxuICAgIC4uLiRFeGFjdDxSZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBBbmltYXRlZFZpZXc+PixcbiAgfT4sXG4+ID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyKHByb3BzLCBmb3J3YXJkZWRSZWYpIHtcbiAgY29uc3Qge1xuICAgIGludmVydGVkLFxuICAgIHNjcm9sbFZpZXdIZWlnaHQsXG4gICAgaGlkZGVuT25TY3JvbGwsXG4gICAgc2Nyb2xsQW5pbWF0ZWRWYWx1ZSxcbiAgICBuZXh0SGVhZGVyTGF5b3V0WTogX25leHRIZWFkZXJMYXlvdXRZLFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgW21lYXN1cmVkLCBzZXRNZWFzdXJlZF0gPSBSZWFjdC51c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtsYXlvdXRZLCBzZXRMYXlvdXRZXSA9IFJlYWN0LnVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IFtsYXlvdXRIZWlnaHQsIHNldExheW91dEhlaWdodF0gPSBSZWFjdC51c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCBbdHJhbnNsYXRlWSwgc2V0VHJhbnNsYXRlWV0gPSBSZWFjdC51c2VTdGF0ZTw/bnVtYmVyPihudWxsKTtcbiAgY29uc3QgW25leHRIZWFkZXJMYXlvdXRZLCBzZXROZXh0SGVhZGVyTGF5b3V0WV0gPSBSZWFjdC51c2VTdGF0ZTw/bnVtYmVyPihcbiAgICBfbmV4dEhlYWRlckxheW91dFksXG4gICk7XG4gIGNvbnN0IFtpc0ZhYnJpYywgc2V0SXNGYWJyaWNdID0gUmVhY3QudXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIGNvbnN0IGNvbXBvbmVudFJlZiA9IFJlYWN0LnVzZVJlZjw/UmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgQW5pbWF0ZWRWaWV3Pj4oKTtcbiAgY29uc3QgX3NldE5hdGl2ZVJlZiA9IHNldEFuZEZvcndhcmRSZWYoe1xuICAgIGdldEZvcndhcmRlZFJlZjogKCkgPT4gZm9yd2FyZGVkUmVmLFxuICAgIHNldExvY2FsUmVmOiByZWYgPT4ge1xuICAgICAgY29tcG9uZW50UmVmLmN1cnJlbnQgPSByZWY7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIHJlZi5zZXROZXh0SGVhZGVyWSA9IHZhbHVlID0+IHtcbiAgICAgICAgICBzZXROZXh0SGVhZGVyTGF5b3V0WSh2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHNldElzRmFicmljKFxuICAgICAgICAgICEhKFxuICAgICAgICAgICAgLy8gQW4gaW50ZXJuYWwgdHJhbnNmb3JtIG1hbmdsZXMgdmFyaWFibGVzIHdpdGggbGVhZGluZyBcIl9cIiBhcyBwcml2YXRlLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRvdC1ub3RhdGlvblxuICAgICAgICAgICAgcmVmWydfaW50ZXJuYWxJbnN0YW5jZUhhbmRsZSddPy5zdGF0ZU5vZGU/LmNhbm9uaWNhbFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgb2Zmc2V0ID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgaGlkZGVuT25TY3JvbGwgPT09IHRydWVcbiAgICAgICAgPyBBbmltYXRlZC5kaWZmQ2xhbXAoXG4gICAgICAgICAgICBzY3JvbGxBbmltYXRlZFZhbHVlXG4gICAgICAgICAgICAgIC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgICAgICAgZXh0cmFwb2xhdGVMZWZ0OiAnY2xhbXAnLFxuICAgICAgICAgICAgICAgIGlucHV0UmFuZ2U6IFtsYXlvdXRZLCBsYXlvdXRZICsgMV0sXG4gICAgICAgICAgICAgICAgb3V0cHV0UmFuZ2U6IChbMCwgMV06IEFycmF5PG51bWJlcj4pLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuaW50ZXJwb2xhdGUoe1xuICAgICAgICAgICAgICAgIGlucHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgICAgICAgICAgICBvdXRwdXRSYW5nZTogKFswLCAtMV06IEFycmF5PG51bWJlcj4pLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC1sYXlvdXRIZWlnaHQsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgIClcbiAgICAgICAgOiBudWxsLFxuICAgIFtzY3JvbGxBbmltYXRlZFZhbHVlLCBsYXlvdXRIZWlnaHQsIGxheW91dFksIGhpZGRlbk9uU2Nyb2xsXSxcbiAgKTtcblxuICBjb25zdCBbXG4gICAgYW5pbWF0ZWRUcmFuc2xhdGVZLFxuICAgIHNldEFuaW1hdGVkVHJhbnNsYXRlWSxcbiAgXSA9IFJlYWN0LnVzZVN0YXRlPEFuaW1hdGVkLk5vZGU+KCgpID0+IHtcbiAgICBjb25zdCBpbnB1dFJhbmdlOiBBcnJheTxudW1iZXI+ID0gWy0xLCAwXTtcbiAgICBjb25zdCBvdXRwdXRSYW5nZTogQXJyYXk8bnVtYmVyPiA9IFswLCAwXTtcbiAgICBjb25zdCBpbml0aWFsVHJhbnNsYXRlWTogQW5pbWF0ZWQuSW50ZXJwb2xhdGlvbiA9IHNjcm9sbEFuaW1hdGVkVmFsdWUuaW50ZXJwb2xhdGUoXG4gICAgICB7XG4gICAgICAgIGlucHV0UmFuZ2UsXG4gICAgICAgIG91dHB1dFJhbmdlLFxuICAgICAgfSxcbiAgICApO1xuXG4gICAgaWYgKG9mZnNldCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gQW5pbWF0ZWQuYWRkKGluaXRpYWxUcmFuc2xhdGVZLCBvZmZzZXQpO1xuICAgIH1cbiAgICByZXR1cm4gaW5pdGlhbFRyYW5zbGF0ZVk7XG4gIH0pO1xuXG4gIGNvbnN0IF9oYXZlUmVjZWl2ZWRJbml0aWFsWmVyb1RyYW5zbGF0ZVkgPSB1c2VSZWY8Ym9vbGVhbj4odHJ1ZSk7XG4gIGNvbnN0IF90aW1lciA9IHVzZVJlZjw/VGltZW91dElEPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0cmFuc2xhdGVZICE9PSAwICYmIHRyYW5zbGF0ZVkgIT0gbnVsbCkge1xuICAgICAgX2hhdmVSZWNlaXZlZEluaXRpYWxaZXJvVHJhbnNsYXRlWS5jdXJyZW50ID0gZmFsc2U7XG4gICAgfVxuICB9LCBbdHJhbnNsYXRlWV0pO1xuXG4gIC8vIFRoaXMgaXMgY2FsbGVkIHdoZW5ldmVyIHRoZSAoSW50ZXJwb2xhdGVkKSBBbmltYXRlZCBWYWx1ZVxuICAvLyB1cGRhdGVzLCB3aGljaCBpcyBzZXZlcmFsIHRpbWVzIHBlciBmcmFtZSBkdXJpbmcgc2Nyb2xsaW5nLlxuICAvLyBUbyBlbnN1cmUgdGhhdCB0aGUgRmFicmljIFNoYWRvd1RyZWUgaGFzIHRoZSBtb3N0IHJlY2VudFxuICAvLyB0cmFuc2xhdGUgc3R5bGUgb2YgdGhpcyBub2RlLCB3ZSBkZWJvdW5jZSB0aGUgdmFsdWUgYW5kIHRoZW5cbiAgLy8gcGFzcyBpdCB0aHJvdWdoIHRvIHRoZSB1bmRlcmx5aW5nIG5vZGUgZHVyaW5nIHJlbmRlci5cbiAgLy8gVGhpcyBpczpcbiAgLy8gMS4gT25seSBhbiBpc3N1ZSBpbiBGYWJyaWMuXG4gIC8vIDIuIFdvcnNlIGluIEFuZHJvaWQgdGhhbiBpT1MuIEluIEFuZHJvaWQsIGJ1dCBub3QgaU9TLCB5b3VcbiAgLy8gICAgY2FuIHRvdWNoIGFuZCBtb3ZlIHlvdXIgZmluZ2VyIHNsaWdodGx5IGFuZCBzdGlsbCB0cmlnZ2VyXG4gIC8vICAgIGEgXCJ0YXBcIiBldmVudC4gSW4gaU9TLCBtb3Zpbmcgd2lsbCBjYW5jZWwgdGhlIHRhcCBpblxuICAvLyAgICBib3RoIEZhYnJpYyBhbmQgbm9uLUZhYnJpYy4gT24gQW5kcm9pZCB3aGVuIHlvdSBtb3ZlXG4gIC8vICAgIHlvdXIgZmluZ2VyLCB0aGUgaGl0LWRldGVjdGlvbiBtb3ZlcyBmcm9tIHRoZSBBbmRyb2lkXG4gIC8vICAgIHBsYXRmb3JtIHRvIEpTLCBzbyB3ZSBuZWVkIHRoZSBTaGFkb3dUcmVlIHRvIGhhdmUga25vd2xlZGdlXG4gIC8vICAgIG9mIHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuICBjb25zdCBhbmltYXRlZFZhbHVlTGlzdGVuZXIgPSB1c2VDYWxsYmFjayhcbiAgICAoe3ZhbHVlfSkgPT4ge1xuICAgICAgY29uc3QgX2RlYm91bmNlVGltZW91dDogbnVtYmVyID0gUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJyA/IDE1IDogNjQ7XG4gICAgICAvLyBXaGVuIHRoZSBBbmltYXRlZEludGVycG9sYXRpb24gaXMgcmVjcmVhdGVkLCBpdCBhbHdheXMgaW5pdGlhbGl6ZXNcbiAgICAgIC8vIHRvIGEgdmFsdWUgb2YgemVybyBhbmQgZW1pdHMgYSB2YWx1ZSBjaGFuZ2Ugb2YgMCB0byBpdHMgbGlzdGVuZXJzLlxuICAgICAgaWYgKHZhbHVlID09PSAwICYmICFfaGF2ZVJlY2VpdmVkSW5pdGlhbFplcm9UcmFuc2xhdGVZLmN1cnJlbnQpIHtcbiAgICAgICAgX2hhdmVSZWNlaXZlZEluaXRpYWxaZXJvVHJhbnNsYXRlWS5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKF90aW1lci5jdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KF90aW1lci5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIF90aW1lci5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdHJhbnNsYXRlWSkge1xuICAgICAgICAgIHNldFRyYW5zbGF0ZVkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LCBfZGVib3VuY2VUaW1lb3V0KTtcbiAgICB9LFxuICAgIFt0cmFuc2xhdGVZXSxcbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0UmFuZ2U6IEFycmF5PG51bWJlcj4gPSBbLTEsIDBdO1xuICAgIGNvbnN0IG91dHB1dFJhbmdlOiBBcnJheTxudW1iZXI+ID0gWzAsIDBdO1xuXG4gICAgaWYgKG1lYXN1cmVkKSB7XG4gICAgICBpZiAoaW52ZXJ0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgLy8gVGhlIGludGVycG9sYXRpb24gbG9va3MgbGlrZTpcbiAgICAgICAgLy8gLSBOZWdhdGl2ZSBzY3JvbGw6IG5vIHRyYW5zbGF0aW9uXG4gICAgICAgIC8vIC0gYHN0aWNrU3RhcnRQb2ludGAgaXMgdGhlIHBvaW50IGF0IHdoaWNoIHRoZSBoZWFkZXIgd2lsbCBzdGFydCBzdGlja2luZy5cbiAgICAgICAgLy8gICBJdCBpcyBjYWxjdWxhdGVkIHVzaW5nIHRoZSBTY3JvbGxWaWV3IHZpZXdwb3J0IGhlaWdodCBzbyBpdCBpcyBhIHRoZSBib3R0b20uXG4gICAgICAgIC8vIC0gSGVhZGVycyB0aGF0IGFyZSBpbiB0aGUgaW5pdGlhbCB2aWV3cG9ydCB3aWxsIG5ldmVyIHN0aWNrLCBgc3RpY2tTdGFydFBvaW50YFxuICAgICAgICAvLyAgIHdpbGwgYmUgbmVnYXRpdmUuXG4gICAgICAgIC8vIC0gRnJvbSAwIHRvIGBzdGlja1N0YXJ0UG9pbnRgIG5vIHRyYW5zbGF0aW9uLiBUaGlzIHdpbGwgY2F1c2UgdGhlIGhlYWRlclxuICAgICAgICAvLyAgIHRvIHNjcm9sbCBub3JtYWxseSB1bnRpbCBpdCByZWFjaGVzIHRoZSB0b3Agb2YgdGhlIHNjcm9sbCB2aWV3LlxuICAgICAgICAvLyAtIEZyb20gYHN0aWNrU3RhcnRQb2ludGAgdG8gd2hlbiB0aGUgbmV4dCBoZWFkZXIgeSBoaXRzIHRoZSBib3R0b20gZWRnZSBvZiB0aGUgaGVhZGVyOiB0cmFuc2xhdGVcbiAgICAgICAgLy8gICBlcXVhbGx5IHRvIHNjcm9sbC4gVGhpcyB3aWxsIGNhdXNlIHRoZSBoZWFkZXIgdG8gc3RheSBhdCB0aGUgdG9wIG9mIHRoZSBzY3JvbGwgdmlldy5cbiAgICAgICAgLy8gLSBQYXN0IHRoZSBjb2xsaXNpb24gd2l0aCB0aGUgbmV4dCBoZWFkZXIgeTogbm8gbW9yZSB0cmFuc2xhdGlvbi4gVGhpcyB3aWxsIGNhdXNlIHRoZVxuICAgICAgICAvLyAgIGhlYWRlciB0byBjb250aW51ZSBzY3JvbGxpbmcgdXAgYW5kIG1ha2Ugcm9vbSBmb3IgdGhlIG5leHQgc3RpY2t5IGhlYWRlci5cbiAgICAgICAgLy8gICBJbiB0aGUgY2FzZSB0aGF0IHRoZXJlIGlzIG5vIG5leHQgaGVhZGVyIGp1c3QgdHJhbnNsYXRlIGVxdWFsbHkgdG9cbiAgICAgICAgLy8gICBzY3JvbGwgaW5kZWZpbml0ZWx5LlxuICAgICAgICBpZiAoc2Nyb2xsVmlld0hlaWdodCAhPSBudWxsKSB7XG4gICAgICAgICAgY29uc3Qgc3RpY2tTdGFydFBvaW50ID0gbGF5b3V0WSArIGxheW91dEhlaWdodCAtIHNjcm9sbFZpZXdIZWlnaHQ7XG4gICAgICAgICAgaWYgKHN0aWNrU3RhcnRQb2ludCA+IDApIHtcbiAgICAgICAgICAgIGlucHV0UmFuZ2UucHVzaChzdGlja1N0YXJ0UG9pbnQpO1xuICAgICAgICAgICAgb3V0cHV0UmFuZ2UucHVzaCgwKTtcbiAgICAgICAgICAgIGlucHV0UmFuZ2UucHVzaChzdGlja1N0YXJ0UG9pbnQgKyAxKTtcbiAgICAgICAgICAgIG91dHB1dFJhbmdlLnB1c2goMSk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgbmV4dCBzdGlja3kgaGVhZGVyIGhhcyBub3QgbG9hZGVkIHlldCAocHJvYmFibHkgd2luZG93aW5nKSBvciBpcyB0aGUgbGFzdFxuICAgICAgICAgICAgLy8gd2UgY2FuIGp1c3Qga2VlcCBpdCBzdGlja2VkIGZvcmV2ZXIuXG4gICAgICAgICAgICBjb25zdCBjb2xsaXNpb25Qb2ludCA9XG4gICAgICAgICAgICAgIChuZXh0SGVhZGVyTGF5b3V0WSB8fCAwKSAtIGxheW91dEhlaWdodCAtIHNjcm9sbFZpZXdIZWlnaHQ7XG4gICAgICAgICAgICBpZiAoY29sbGlzaW9uUG9pbnQgPiBzdGlja1N0YXJ0UG9pbnQpIHtcbiAgICAgICAgICAgICAgaW5wdXRSYW5nZS5wdXNoKGNvbGxpc2lvblBvaW50LCBjb2xsaXNpb25Qb2ludCArIDEpO1xuICAgICAgICAgICAgICBvdXRwdXRSYW5nZS5wdXNoKFxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblBvaW50IC0gc3RpY2tTdGFydFBvaW50LFxuICAgICAgICAgICAgICAgIGNvbGxpc2lvblBvaW50IC0gc3RpY2tTdGFydFBvaW50LFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhlIGludGVycG9sYXRpb24gbG9va3MgbGlrZTpcbiAgICAgICAgLy8gLSBOZWdhdGl2ZSBzY3JvbGw6IG5vIHRyYW5zbGF0aW9uXG4gICAgICAgIC8vIC0gRnJvbSAwIHRvIHRoZSB5IG9mIHRoZSBoZWFkZXI6IG5vIHRyYW5zbGF0aW9uLiBUaGlzIHdpbGwgY2F1c2UgdGhlIGhlYWRlclxuICAgICAgICAvLyAgIHRvIHNjcm9sbCBub3JtYWxseSB1bnRpbCBpdCByZWFjaGVzIHRoZSB0b3Agb2YgdGhlIHNjcm9sbCB2aWV3LlxuICAgICAgICAvLyAtIEZyb20gaGVhZGVyIHkgdG8gd2hlbiB0aGUgbmV4dCBoZWFkZXIgeSBoaXRzIHRoZSBib3R0b20gZWRnZSBvZiB0aGUgaGVhZGVyOiB0cmFuc2xhdGVcbiAgICAgICAgLy8gICBlcXVhbGx5IHRvIHNjcm9sbC4gVGhpcyB3aWxsIGNhdXNlIHRoZSBoZWFkZXIgdG8gc3RheSBhdCB0aGUgdG9wIG9mIHRoZSBzY3JvbGwgdmlldy5cbiAgICAgICAgLy8gLSBQYXN0IHRoZSBjb2xsaXNpb24gd2l0aCB0aGUgbmV4dCBoZWFkZXIgeTogbm8gbW9yZSB0cmFuc2xhdGlvbi4gVGhpcyB3aWxsIGNhdXNlIHRoZVxuICAgICAgICAvLyAgIGhlYWRlciB0byBjb250aW51ZSBzY3JvbGxpbmcgdXAgYW5kIG1ha2Ugcm9vbSBmb3IgdGhlIG5leHQgc3RpY2t5IGhlYWRlci5cbiAgICAgICAgLy8gICBJbiB0aGUgY2FzZSB0aGF0IHRoZXJlIGlzIG5vIG5leHQgaGVhZGVyIGp1c3QgdHJhbnNsYXRlIGVxdWFsbHkgdG9cbiAgICAgICAgLy8gICBzY3JvbGwgaW5kZWZpbml0ZWx5LlxuICAgICAgICBpbnB1dFJhbmdlLnB1c2gobGF5b3V0WSk7XG4gICAgICAgIG91dHB1dFJhbmdlLnB1c2goMCk7XG4gICAgICAgIC8vIElmIHRoZSBuZXh0IHN0aWNreSBoZWFkZXIgaGFzIG5vdCBsb2FkZWQgeWV0IChwcm9iYWJseSB3aW5kb3dpbmcpIG9yIGlzIHRoZSBsYXN0XG4gICAgICAgIC8vIHdlIGNhbiBqdXN0IGtlZXAgaXQgc3RpY2tlZCBmb3JldmVyLlxuICAgICAgICBjb25zdCBjb2xsaXNpb25Qb2ludCA9IChuZXh0SGVhZGVyTGF5b3V0WSB8fCAwKSAtIGxheW91dEhlaWdodDtcbiAgICAgICAgaWYgKGNvbGxpc2lvblBvaW50ID49IGxheW91dFkpIHtcbiAgICAgICAgICBpbnB1dFJhbmdlLnB1c2goY29sbGlzaW9uUG9pbnQsIGNvbGxpc2lvblBvaW50ICsgMSk7XG4gICAgICAgICAgb3V0cHV0UmFuZ2UucHVzaChjb2xsaXNpb25Qb2ludCAtIGxheW91dFksIGNvbGxpc2lvblBvaW50IC0gbGF5b3V0WSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5wdXRSYW5nZS5wdXNoKGxheW91dFkgKyAxKTtcbiAgICAgICAgICBvdXRwdXRSYW5nZS5wdXNoKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IG5ld0FuaW1hdGVkVHJhbnNsYXRlWTogQW5pbWF0ZWQuTm9kZSA9IHNjcm9sbEFuaW1hdGVkVmFsdWUuaW50ZXJwb2xhdGUoe1xuICAgICAgaW5wdXRSYW5nZSxcbiAgICAgIG91dHB1dFJhbmdlLFxuICAgIH0pO1xuXG4gICAgaWYgKG9mZnNldCAhPSBudWxsKSB7XG4gICAgICBuZXdBbmltYXRlZFRyYW5zbGF0ZVkgPSBBbmltYXRlZC5hZGQobmV3QW5pbWF0ZWRUcmFuc2xhdGVZLCBvZmZzZXQpO1xuICAgIH1cblxuICAgIC8vIGFkZCB0aGUgZXZlbnQgbGlzdGVuZXJcbiAgICBsZXQgYW5pbWF0ZWRMaXN0ZW5lcklkO1xuICAgIGlmIChpc0ZhYnJpYykge1xuICAgICAgYW5pbWF0ZWRMaXN0ZW5lcklkID0gbmV3QW5pbWF0ZWRUcmFuc2xhdGVZLmFkZExpc3RlbmVyKFxuICAgICAgICBhbmltYXRlZFZhbHVlTGlzdGVuZXIsXG4gICAgICApO1xuICAgIH1cblxuICAgIHNldEFuaW1hdGVkVHJhbnNsYXRlWShuZXdBbmltYXRlZFRyYW5zbGF0ZVkpO1xuXG4gICAgLy8gY2xlYW4gdXAgdGhlIGV2ZW50IGxpc3RlbmVyIGFuZCB0aW1lclxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoYW5pbWF0ZWRMaXN0ZW5lcklkKSB7XG4gICAgICAgIG5ld0FuaW1hdGVkVHJhbnNsYXRlWS5yZW1vdmVMaXN0ZW5lcihhbmltYXRlZExpc3RlbmVySWQpO1xuICAgICAgfVxuICAgICAgaWYgKF90aW1lci5jdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KF90aW1lci5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbbmV4dEhlYWRlckxheW91dFksIG1lYXN1cmVkLCBsYXlvdXRIZWlnaHQsIGxheW91dFksIHNjcm9sbFZpZXdIZWlnaHQsIHNjcm9sbEFuaW1hdGVkVmFsdWUsIGludmVydGVkLCBvZmZzZXQsIGFuaW1hdGVkVmFsdWVMaXN0ZW5lciwgaXNGYWJyaWNdKTtcblxuICBjb25zdCBfb25MYXlvdXQgPSAoZXZlbnQ6IExheW91dEV2ZW50KSA9PiB7XG4gICAgc2V0TGF5b3V0WShldmVudC5uYXRpdmVFdmVudC5sYXlvdXQueSk7XG4gICAgc2V0TGF5b3V0SGVpZ2h0KGV2ZW50Lm5hdGl2ZUV2ZW50LmxheW91dC5oZWlnaHQpO1xuICAgIHNldE1lYXN1cmVkKHRydWUpO1xuXG4gICAgcHJvcHMub25MYXlvdXQoZXZlbnQpO1xuICAgIGNvbnN0IGNoaWxkID0gUmVhY3QuQ2hpbGRyZW4ub25seShwcm9wcy5jaGlsZHJlbik7XG4gICAgaWYgKGNoaWxkLnByb3BzLm9uTGF5b3V0KSB7XG4gICAgICBjaGlsZC5wcm9wcy5vbkxheW91dChldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGNoaWxkID0gUmVhY3QuQ2hpbGRyZW4ub25seShwcm9wcy5jaGlsZHJlbik7XG5cbiAgLy8gVE9ETyBUNjgzMTk1MzU6IHJlbW92ZSB0aGlzIGlmIE5hdGl2ZUFuaW1hdGVkIGlzIHJld3JpdHRlbiBmb3IgRmFicmljXG4gIGNvbnN0IHBhc3N0aHJvdWdoQW5pbWF0ZWRQcm9wRXhwbGljaXRWYWx1ZXMgPVxuICAgIGlzRmFicmljICYmIHRyYW5zbGF0ZVkgIT0gbnVsbFxuICAgICAgPyB7XG4gICAgICAgICAgc3R5bGU6IHt0cmFuc2Zvcm06IFt7dHJhbnNsYXRlWTogdHJhbnNsYXRlWX1dfSxcbiAgICAgICAgfVxuICAgICAgOiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgLyogJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddIHBhc3N0aHJvdWdoQW5pbWF0ZWRQcm9wRXhwbGljaXRWYWx1ZXMgaXNuJ3QgcHJvcGVybHlcbiAgICAgICBpbmNsdWRlZCBpbiB0aGUgQW5pbWF0ZWQuVmlldyBmbG93IHR5cGUuICovXG4gICAgPEFuaW1hdGVkVmlld1xuICAgICAgY29sbGFwc2FibGU9e2ZhbHNlfVxuICAgICAgbmF0aXZlSUQ9e3Byb3BzLm5hdGl2ZUlEfVxuICAgICAgb25MYXlvdXQ9e19vbkxheW91dH1cbiAgICAgIHJlZj17X3NldE5hdGl2ZVJlZn1cbiAgICAgIHN0eWxlPXtbXG4gICAgICAgIGNoaWxkLnByb3BzLnN0eWxlLFxuICAgICAgICBzdHlsZXMuaGVhZGVyLFxuICAgICAgICB7dHJhbnNmb3JtOiBbe3RyYW5zbGF0ZVk6IGFuaW1hdGVkVHJhbnNsYXRlWX1dfSxcbiAgICAgIF19XG4gICAgICBwYXNzdGhyb3VnaEFuaW1hdGVkUHJvcEV4cGxpY2l0VmFsdWVzPXtcbiAgICAgICAgcGFzc3Rocm91Z2hBbmltYXRlZFByb3BFeHBsaWNpdFZhbHVlc1xuICAgICAgfT5cbiAgICAgIHtSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIHtcbiAgICAgICAgc3R5bGU6IHN0eWxlcy5maWxsLCAvLyBXZSB0cmFuc2ZlciB0aGUgY2hpbGQgc3R5bGUgdG8gdGhlIHdyYXBwZXIuXG4gICAgICAgIG9uTGF5b3V0OiB1bmRlZmluZWQsIC8vIHdlIGNhbGwgdGhpcyBtYW51YWxseSB0aHJvdWdoIG91ciB0aGlzLl9vbkxheW91dFxuICAgICAgfSl9XG4gICAgPC9BbmltYXRlZFZpZXc+XG4gICk7XG59KTtcblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBoZWFkZXI6IHtcbiAgICB6SW5kZXg6IDEwLFxuICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICB9LFxuICBmaWxsOiB7XG4gICAgZmxleDogMSxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyV2l0aEZvcndhcmRlZFJlZjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBV0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUdBLElBQU1BLFlBQVksR0FBR0MsaUJBQUEsQ0FBU0MsSUFBOUI7QUFnQkEsSUFBTUMsc0NBTUwsR0FBR0MsS0FBSyxDQUFDQyxVQUFOLENBQWlCLFNBQVNDLHNCQUFULENBQWdDQyxLQUFoQyxFQUF1Q0MsWUFBdkMsRUFBcUQ7RUFDeEUsSUFDRUMsUUFERixHQU1JRixLQU5KLENBQ0VFLFFBREY7RUFBQSxJQUVFQyxnQkFGRixHQU1JSCxLQU5KLENBRUVHLGdCQUZGO0VBQUEsSUFHRUMsY0FIRixHQU1JSixLQU5KLENBR0VJLGNBSEY7RUFBQSxJQUlFQyxtQkFKRixHQU1JTCxLQU5KLENBSUVLLG1CQUpGO0VBQUEsSUFLcUJDLGtCQUxyQixHQU1JTixLQU5KLENBS0VPLGlCQUxGOztFQVFBLHNCQUFnQ1YsS0FBSyxDQUFDVyxRQUFOLENBQXdCLEtBQXhCLENBQWhDO0VBQUE7RUFBQSxJQUFPQyxRQUFQO0VBQUEsSUFBaUJDLFdBQWpCOztFQUNBLHVCQUE4QmIsS0FBSyxDQUFDVyxRQUFOLENBQXVCLENBQXZCLENBQTlCO0VBQUE7RUFBQSxJQUFPRyxP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
{"version":3,"names":["MovieDetails","props","componentDidMount","navigation","state","params","id","watchlistItems","filterData","filter","item","setState","isWatchlistItem","length","getMovieDetailsAction","data","status","console","log","movieData","_didTapOnBackButton","goBack","_addToWatchList","updateWatchlist","updatedWatchListArray","tempArray","indexFound","map","obj","index","splice","_notifyMessage","msg","Platform","OS","ToastAndroid","show","SHORT","alert","isLoading","styles","safeContainer","posterStyle","uri","Constants","APP_IMG_URL_LARGE","poster_path","movieTitleContainer","imgStyle","movieTitleTextStyle","title","genreListStyle","genres","key","marginLeft","marginRight","name","genreContainer","genreTextStyle","movieTextStyle","aboutMovieStyle","thinSeparator","overviewStyle","overviewContentStyle","overview","releaseStyle","releaseContentStyle","release_date","rowStyle","avgRatingContainer","vote_average","flex","flexDirection","marginTop","alignItems","fontSize","vote_count","popularity","bottomContainerStyle","backButtonContainerStyle","backButtonContainer","backButtonImageStyle","Images","back","backTextStyle","watchListContainerStyle","watchListContainer","watchListImageStyle","watchlist_dark_tick","watchlist_dark","Component"],"sources":["MovieDetails.js"],"sourcesContent":["/**\n * Created on July 17, 2022\n * Movie Details screen\n */\n\nimport {\n  View,\n  TouchableOpacity,\n  Text,\n  SafeAreaView,\n  FlatList,\n  Image,\n  ToastAndroid,\n} from \"react-native\";\n\nimport styles from \"./styles\";\nimport React, { Component } from \"react\";\nimport Images from \"../../config/images\";\nimport Constants from \"../../config/constants\";\nimport { ScrollView } from \"react-native\";\nimport HudView from \"../../components/hudView\";\n\nexport default class MovieDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      movieData: \"\",\n      isWatchlistItem: false,\n    };\n  }\n\n  /*\n   * Fetch movie details on page load\n   */\n\n  componentDidMount = async () => {\n    const { id } = await this.props.navigation.state.params;\n    const { watchlistItems } = this.props;\n    let filterData = watchlistItems.filter((item) => item.id == id);\n    this.setState({ isWatchlistItem: filterData.length > 0 });\n    this.props.getMovieDetailsAction(id, ({ data, status }) => {\n      if (status) {\n        console.log(\"MOVIE DETAIL SCREEN\", data);\n        this.setState({\n          movieData: data,\n        });\n      }\n    });\n  };\n\n  /*\n   * Shows a toast/alert message when movie is added/removed from Watchlist\n   */\n  _notifyMessage(msg) {\n    if (Platform.OS === \"android\") {\n      ToastAndroid.show(msg, ToastAndroid.SHORT);\n    } else {\n      alert(msg);\n    }\n  }\n\n  /*\n   * Navigates to back\n   */\n  _didTapOnBackButton = () => {\n    this.props.navigation.goBack();\n  };\n\n  /*\n   * Add/Remove movie item to watchlist\n   * Fetch watchlist data from reducer and modify it and dispatch to reducer\n   */\n  _addToWatchList = () => {\n    const { item, id } = this.props.navigation.state.params;\n    const { watchlistItems, updateWatchlist } = this.props;\n    const { isWatchlistItem } = this.state;\n    let updatedWatchListArray = [];\n    if (isWatchlistItem) {\n      let tempArray = [...watchlistItems];\n      let indexFound = -1;\n      tempArray.map((obj, index) => {\n        if (obj.id == id) {\n          indexFound = index;\n        }\n      });\n      if (indexFound > -1) tempArray.splice(indexFound, 1);\n      updatedWatchListArray = tempArray;\n    } else {\n      updatedWatchListArray = [...watchlistItems, ...[item]];\n    }\n    updateWatchlist(updatedWatchListArray);\n    this.setState({ isWatchlistItem: !this.state.isWatchlistItem });\n    this._notifyMessage(\n      isWatchlistItem ? \"Removed from Watchlist\" : \"Added to Watchlist\"\n    );\n  };\n  render() {\n    const { movieData, isWatchlistItem } = this.state;\n    const { isLoading } = this.props;\n\n    return (\n      <SafeAreaView style={styles.safeContainer}>\n        <ScrollView showsVerticalScrollIndicator={false}>\n          <Image\n            style={styles.posterStyle}\n            source={{\n              uri: Constants.APP_IMG_URL_LARGE + movieData.poster_path,\n            }}\n            testID={\"poster\"}\n          ></Image>\n\n          <View style={styles.movieTitleContainer}>\n            <Image\n              style={styles.imgStyle}\n              source={{\n                uri: Constants.APP_IMG_URL_LARGE + movieData.poster_path,\n              }}\n              testID={\"sub_poster\"}\n            ></Image>\n\n            <Text style={styles.movieTitleTextStyle}>{movieData.title}</Text>\n          </View>\n\n          <FlatList\n            style={styles.genreListStyle}\n            horizontal={true}\n            data={movieData.genres}\n            renderItem={({ item, key }) => {\n              return (\n                <View\n                  style={[\n                    {\n                      marginLeft: key == 0 ? 20 : 10,\n                      marginRight: key == movieData.genres.length - 1 ? 20 : 10,\n                    },\n                  ]}\n                >\n                  {!!item.name && (\n                    <View style={styles.genreContainer}>\n                      <Text style={styles.genreTextStyle}>{item.name}</Text>\n                    </View>\n                  )}\n                </View>\n              );\n            }}\n          />\n\n          <View style={styles.movieTitleContainer}>\n            <Text style={[styles.movieTextStyle, styles.aboutMovieStyle]}>\n              {\"About Movie\"}\n            </Text>\n\n            <View style={styles.thinSeparator} />\n\n            <Text style={[styles.movieTextStyle, styles.overviewStyle]}>\n              {\"Overviews:\"}\n            </Text>\n\n            <Text style={[styles.movieTextStyle, styles.overviewContentStyle]}>\n              {movieData.overview}\n            </Text>\n\n            <Text style={[styles.movieTextStyle, styles.releaseStyle]}>\n              {\"Release Date:\"}\n            </Text>\n\n            <Text style={[styles.movieTextStyle, styles.releaseContentStyle]}>\n              {movieData.release_date}\n            </Text>\n\n            <View style={styles.rowStyle}>\n              <View style={styles.avgRatingContainer}>\n                <Text\n                  style={[styles.movieTextStyle, styles.releaseContentStyle]}\n                >\n                  {\"Average Rating:\"}\n                </Text>\n\n                <Text\n                  style={[styles.movieTextStyle, styles.releaseContentStyle]}\n                >\n                  {movieData.vote_average}\n                </Text>\n              </View>\n\n              <View\n                style={{\n                  flex: 1,\n                  flexDirection: \"column\",\n                  marginTop: 12,\n                  alignItems: \"flex-start\",\n                }}\n              >\n                <Text style={[styles.movieTextStyle, { fontSize: 12 }]}>\n                  {\"Rate Count:\"}\n                </Text>\n\n                <Text style={[styles.movieTextStyle, { fontSize: 12 }]}>\n                  {movieData.vote_count}\n                </Text>\n              </View>\n            </View>\n\n            <Text style={[styles.movieTextStyle, styles.releaseStyle]}>\n              {\"Popularity:\"}\n            </Text>\n\n            <Text style={[styles.movieTextStyle, styles.releaseContentStyle]}>\n              {movieData.popularity}\n            </Text>\n          </View>\n        </ScrollView>\n\n        <View style={styles.bottomContainerStyle}>\n          <View style={styles.backButtonContainerStyle}>\n            <TouchableOpacity\n              style={styles.backButtonContainer}\n              onPress={() => this._didTapOnBackButton()}\n            >\n              <Image\n                style={styles.backButtonImageStyle}\n                source={Images.back}\n              ></Image>\n\n              <Text style={[styles.movieTextStyle, styles.backTextStyle]}>\n                {\"Back\"}\n              </Text>\n            </TouchableOpacity>\n          </View>\n\n          <View style={styles.watchListContainerStyle}>\n            <TouchableOpacity\n              style={styles.watchListContainer}\n              onPress={() => this._addToWatchList()}\n            >\n              <Image\n                style={styles.watchListImageStyle}\n                source={\n                  isWatchlistItem\n                    ? Images.watchlist_dark_tick\n                    : Images.watchlist_dark\n                }\n              ></Image>\n            </TouchableOpacity>\n          </View>\n        </View>\n        {isLoading && <HudView />}\n      </SafeAreaView>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAKA;;AAUA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;IAEqBA,Y;;;;;EACnB,sBAAYC,KAAZ,EAAmB;IAAA;;IAAA;IACjB,0BAAMA,KAAN;;IADiB,MAanBC,iBAbmB,GAaC;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,kCACG,MAAKD,KAAL,CAAWE,UAAX,CAAsBC,KAAtB,CAA4BC,MAD/B;;YAAA;cAAA;cACVC,EADU,yBACVA,EADU;cAEVC,cAFU,GAES,MAAKN,KAFd,CAEVM,cAFU;cAGdC,UAHc,GAGDD,cAAc,CAACE,MAAf,CAAsB,UAACC,IAAD;gBAAA,OAAUA,IAAI,CAACJ,EAAL,IAAWA,EAArB;cAAA,CAAtB,CAHC;;cAIlB,MAAKK,QAAL,CAAc;gBAAEC,eAAe,EAAEJ,UAAU,CAACK,MAAX,GAAoB;cAAvC,CAAd;;cACA,MAAKZ,KAAL,CAAWa,qBAAX,CAAiCR,EAAjC,EAAqC,gBAAsB;gBAAA,IAAnBS,IAAmB,QAAnBA,IAAmB;gBAAA,IAAbC,MAAa,QAAbA,MAAa;;gBACzD,IAAIA,MAAJ,EAAY;kBACVC,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCH,IAAnC;;kBACA,MAAKJ,QAAL,CAAc;oBACZQ,SAAS,EAAEJ;kBADC,CAAd;gBAGD;cACF,CAPD;;YALkB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAbD;;IAAA,MA0CnBK,mBA1CmB,GA0CG,YAAM;MAC1B,MAAKnB,KAAL,CAAWE,UAAX,CAAsBkB,MAAtB;IACD,CA5CkB;;IAAA,MAkDnBC,eAlDmB,GAkDD,YAAM;MACtB,4BAAqB,MAAKrB,KAAL,CAAWE,UAAX,CAAsBC,KAAtB,CAA4BC,MAAjD;MAAA,IAAQK,IAAR,yBAAQA,IAAR;MAAA,IAAcJ,EAAd,yBAAcA,EAAd;MACA,kBAA4C,MAAKL,KAAjD;MAAA,IAAQM,cAAR,eAAQA,cAAR;MAAA,IAAwBgB,eAAxB,eAAwBA,eAAxB;MACA,IAAQX,eAAR,GAA4B,MAAKR,KAAjC,CAAQQ,eAAR;MACA,IAAIY,qBAAqB,GAAG,EAA5B;;MACA,IAAIZ,eAAJ,EAAqB;QACnB,IAAIa,SAAS,oCAAOlB,cAAP,CAAb;QACA,IAAImB,UAAU,GAAG,CAAC,CAAlB;QACAD,SAAS,CAACE,GAAV,CAAc,UAACC,GAAD,EAAMC,KAAN,EAAgB;UAC5B,IAAID,GAAG,CAACtB,EAAJ,IAAUA,EAAd,EAAkB;YAChBoB,UAAU,GAAGG,KAAb;UACD;QACF,CAJD;QAKA,IAAIH,UAAU,GAAG,CAAC,CAAlB,EAAqBD,SAAS,CAACK,MAAV,CAAiBJ,UAAjB,EAA6B,CAA7B;QACrBF,qBAAqB,GAAGC,SAAxB;MACD,CAVD,MAUO;QACLD,qBAAqB,8CAAOjB,cAAP,GAA0B,CAACG,IAAD,CAA1B,CAArB;MACD;;MACDa,eAAe,CAACC,qBAAD,CAAf;;MACA,MAAKb,QAAL,CAAc;QAAEC,eAAe,EAAE,CAAC,MAAKR,KAAL,CAAWQ;MAA/B,CAAd;;MACA,MAAKmB,cAAL,CACEnB,eAAe,GAAG,wBAAH,GAA8B,oBAD/C;IAGD,CAzEkB;;IAGjB,MAAKR,KAAL,GAAa;MACXe,SAAS,EAAE,EADA;MAEXP,eAAe,EAAE;IAFN,CAAb;IAHiB;EAOlB;;;;WAwBD,wBAAeoB,GAAf,EAAoB;MAClB,IAAIC,QAAQ,CAACC,EAAT,KAAgB,SAApB,EAA+B;QAC7BC,yBAAA,CAAaC,IAAb,CAAkBJ,GAAlB,EAAuBG,yBAAA,CAAaE,KAApC;MACD,CAFD,MAEO;QACLC,KAAK,CAACN,GAAD,CAAL;MACD;IACF;;;WAqCD,kBAAS;MAAA;;MACP,kBAAuC,KAAK5B,KAA5C;MAAA,IAAQe,SAAR,eAAQA,SAAR;MAAA,IAAmBP,eAAnB,eAAmBA,eAAnB;MACA,IAAQ2B,SAAR,GAAsB,KAAKtC,KAA3B,CAAQsC,SAAR;MAEA,OACE,6BAAC,yBAAD;QAAc,KAAK,EAAEC,eAAA,CAAOC;MAA5B,GACE,6BAAC,uBAAD;QAAY,4BAA4B,EAAE;MAA1C,GACE,6BAAC,kBAAD;QACE,KAAK,EAAED,eAAA,CAAOE,WADhB;QAEE,MAAM,EAAE;UACNC,GAAG,EAAEC,kBAAA,CAAUC,iBAAV,GAA8B1B,SAAS,CAAC2B;QADvC,CAFV;QAKE,MAAM,EAAE;MALV,EADF,EASE,6BAAC,iBAAD;QAAM,KAAK,EAAEN,eAAA,CAAOO;MAApB,GACE,6BAAC,kBAAD;QACE,KAAK,EAAEP,eAAA,CAAOQ,QADhB;QAEE,MAAM,EAAE;UACNL,GAAG,EAAEC,kBAAA,CAAUC,iBAAV,GAA8B1B,SAAS,CAAC2B;QADvC,CAFV;QAKE,MAAM,EAAE;MALV,EADF,EASE,6BAAC,iBAAD;QAAM,KAAK,EAAEN,eAAA,CAAOS;MAApB,GAA0C9B,SAAS,CAAC+B,KAApD,CATF,CATF,EAqBE,6BAAC,qBAAD;QACE,KAAK,EAAEV,eAAA,CAAOW,cADhB;QAEE,UAAU,EAAE,IAFd;QAGE,IAAI,EAAEhC,SAAS,CAACiC,MAHlB;QAIE,UAAU,EAAE,2BAAmB;UAAA,IAAhB1C,IAAgB,SAAhBA,IAAgB;UAAA,IAAV2C,GAAU,SAAVA,GAAU;UAC7B,OACE,6BAAC,iBAAD;YACE,KAAK,EAAE,CACL;cACEC,UAAU,EAAED,GAAG,IAAI,CAAP,GAAW,EAAX,GAAgB,EAD9B;cAEEE,WAAW,EAAEF,GAAG,IAAIlC,SAAS,CAACiC,MAAV,CAAiBvC,MAAjB,GAA0B,CAAjC,GAAqC,EAArC,GAA0C;YAFzD,CADK;UADT,GAQG,CAAC,CAACH,IAAI,CAAC8C,IAAP,IACC,6BAAC,iBAAD;YAAM,KAAK,EAAEhB,eAAA,CAAOiB;UAApB,GACE,6BAAC,iBAAD;YAAM,KAAK,EAAEjB,eAAA,CAAOkB;UAApB,GAAqChD,IAAI,CAAC8C,IAA1C,CADF,CATJ,CADF;QAgBD;MArBH,EArBF,EA6CE,6BAAC,iBAAD;QAAM,KAAK,EAAEhB,eAAA,CAAOO;MAApB,GACE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACP,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAOoB,eAA/B;MAAb,GACG,aADH,CADF,EAKE,6BAAC,iBAAD;QAAM,KAAK,EAAEpB,eAAA,CAAOqB;MAApB,EALF,EAOE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACrB,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAOsB,aAA/B;MAAb,GACG,YADH,CAPF,EAWE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACtB,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAOuB,oBAA/B;MAAb,GACG5C,SAAS,CAAC6C,QADb,CAXF,EAeE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACxB,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAOyB,YAA/B;MAAb,GACG,eADH,CAfF,EAmBE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACzB,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAO0B,mBAA/B;MAAb,GACG/C,SAAS,CAACgD,YADb,CAnBF,EAuBE,6BAAC,iBAAD;QAAM,KAAK,EAAE3B,eAAA,CAAO4B;MAApB,GACE,6BAAC,iBAAD;QAAM,KAAK,EAAE5B,eAAA,CAAO6B;MAApB,GACE,6BAAC,iBAAD;QACE,KAAK,EAAE,CAAC7B,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAO0B,mBAA/B;MADT,GAGG,iBAHH,CADF,EAOE,6BAAC,iBAAD;QACE,KAAK,EAAE,CAAC1B,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAO0B,mBAA/B;MADT,GAGG/C,SAAS,CAACmD,YAHb,CAPF,CADF,EAeE,6BAAC,iBAAD;QACE,KAAK,EAAE;UACLC,IAAI,EAAE,CADD;UAELC,aAAa,EAAE,QAFV;UAGLC,SAAS,EAAE,EAHN;UAILC,UAAU,EAAE;QAJP;MADT,GAQE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAAClC,eAAA,CAAOmB,cAAR,EAAwB;UAAEgB,QAAQ,EAAE;QAAZ,CAAxB;MAAb,GACG,aADH,CARF,EAYE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACnC,eAAA,CAAOmB,cAAR,EAAwB;UAAEgB,QAAQ,EAAE;QAAZ,CAAxB;MAAb,GACGxD,SAAS,CAACyD,UADb,CAZF,CAfF,CAvBF,EAwDE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACpC,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAOyB,YAA/B;MAAb,GACG,aADH,CAxDF,EA4DE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAACzB,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAO0B,mBAA/B;MAAb,GACG/C,SAAS,CAAC0D,UADb,CA5DF,CA7CF,CADF,EAgHE,6BAAC,iBAAD;QAAM,KAAK,EAAErC,eAAA,CAAOsC;MAApB,GACE,6BAAC,iBAAD;QAAM,KAAK,EAAEtC,eAAA,CAAOuC;MAApB,GACE,6BAAC,6BAAD;QACE,KAAK,EAAEvC,eAAA,CAAOwC,mBADhB;QAEE,OAAO,EAAE;UAAA,OAAM,MAAI,CAAC5D,mBAAL,EAAN;QAAA;MAFX,GAIE,6BAAC,kBAAD;QACE,KAAK,EAAEoB,eAAA,CAAOyC,oBADhB;QAEE,MAAM,EAAEC,eAAA,CAAOC;MAFjB,EAJF,EASE,6BAAC,iBAAD;QAAM,KAAK,EAAE,CAAC3C,eAAA,CAAOmB,cAAR,EAAwBnB,eAAA,CAAO4C,aAA/B;MAAb,GACG,MADH,CATF,CADF,CADF,EAiBE,6BAAC,iBAAD;QAAM,KAAK,EAAE5C,eAAA,CAAO6C;MAApB,GACE,6BAAC,6BAAD;QACE,KAAK,EAAE7C,eAAA,CAAO8C,kBADhB;QAEE,OAAO,EAAE;UAAA,OAAM,MAAI,CAAChE,eAAL,EAAN;QAAA;MAFX,GAIE,6BAAC,kBAAD;QACE,KAAK,EAAEkB,eAAA,CAAO+C,mBADhB;QAEE,MAAM,EACJ3E,eAAe,GACXsE,eAAA,CAAOM,mBADI,GAEXN,eAAA,CAAOO;MALf,EAJF,CADF,CAjBF,CAhHF,EAiJGlD,SAAS,IAAI,6BAAC,gBAAD,OAjJhB,CADF;IAqJD;;;EApOuCmD,gB"}